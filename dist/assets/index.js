(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();AFRAME.templates={};AFRAME.registerTemplate=function(e,t){if(!e)throw new Error("Name of template cannot be empty");if(AFRAME.templates[e])throw new Error('Template "'+e+'" already registered');AFRAME.templates[e]=new c(t)};class c{constructor(t){this.HTML=t}template(t){const s=document.createElement("template");return typeof this.HTML=="string"&&(s.innerHTML=this.HTML),typeof this.HTML=="function"&&(s.innerHTML=this.HTML(t)),s}instance(t){if(this.scene=document.querySelector("a-scene"),!this.scene)throw new Error("Scene is not found");var s=document.importNode(this.template(t).content,!0),o=s.children[0];return this.scene.appendChild(o),o}}class n extends AFRAME.ANode{constructor(){super(),this.isAttached=!1}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}AEntity.prototype.doConnectedCallback.call(this)}doConnectedCallback(){super.connectedCallback(),this.attach()}getTemplateOptions(){const t=this.getAttribute("options");if(!t)return{};const s={};return t.split(";").forEach(function(r){const a=r.split(":");s[a[0].trim()]=a[1].trim()}),s}attachNodes(t,s){t.forEach(o=>{if(o.tagName.toLowerCase()==="a-template"){if(o.isAttached)return!1;const r=o.getNodes();t=t.concat(r)}}),t.forEach(o=>{if(o.tagName.toLowerCase()==="a-sub-assets")return o.isAttached?!1:o.attach&&o.attach();if(o.tagName.toLowerCase()==="a-template")return!1;const r=o.cloneNode(!0);r.dataset[s]=this.id,this.sceneEl.appendChild(r)})}attach(){console.error("Not implemented")}}class l extends n{constructor(){super()}attach(){const t=this.getAttribute("name");if(!t)return!1;if(!AFRAME.templates[t])throw new Error('Cannot find "'+t+'" template');this.options=this.getTemplateOptions();const s=AFRAME.templates[t],o=document.importNode(s.template(this.options).content,!0);this.attachNodes(Array.from(o.children),"templateId"),this.load(),this.isAttached=!0}getNodes(){const t=this.getAttribute("name");if(!t)return!1;if(!AFRAME.templates[t])throw new Error(`Cannot find template - ${t}`);this.options=this.getTemplateOptions();const s=AFRAME.templates[t],o=document.importNode(s.template(this.options).content,!0);return this.isAttached=!0,Array.from(o.children)}}customElements.define("a-template",l);class h extends n{constructor(){super()}attach(){if(this.sceneEl=document.querySelector("a-scene"),!this.sceneEl)throw new Error("a-sub-assets cannot find a-scene.");this.assets=this.sceneEl.querySelector("a-assets")||this.createSceneAssets(),Array.from(this.children).forEach(t=>{const s=t.cloneNode(!0);this.assets.appendChild(s)}),this.load()}createSceneAssets(){const t=document.createElement("a-assets");return this.sceneEl.appendChild(t),t}}customElements.define("a-sub-assets",h);AFRAME.registerSystem("router",{schema:{current:{type:"string",default:""},previous:{type:"string",default:""},routes:{default:{}}},init(){this.collectRoutes(),this.setupInitialRoute()},collectRoutes(){Array.from(this.el.querySelectorAll("a-route")).forEach(this.registerRoute.bind(this))},registerRoute(e){if(!e.id)throw new Error("a-route must have id attribute");if(this.data.routes[e.id])throw new Error("Route with following id: "+e.id+" is already registered.");this.data.routes[e.id]=e},setupInitialRoute:function(){this.data.current=this.data.current||Object.keys(this.data.routes)[0]},changeRoute:function(e){if(this.data.current===e)return!1;if(!this.data.routes[e])throw new Error("Route with following id: "+e+" is not registered.");this.data.previous=this.data.current,this.data.routes[this.data.previous].detach(),this.data.current=e,this.data.routes[this.data.current].attach(),this.el.emit("route-changed",e)}});class d extends n{constructor(){super(),this.isRoute=!0}attach(){this.router=this.sceneEl.getAttribute("router"),this.id===this.router.current?this.attachHandler():this.load()}attachHandler(){this.children.length&&this.attachNodes(this.children,"routeId");var t=this.getAttribute("template");if(!t)return!1;if(!AFRAME.templates)throw new Error("Include aframe-templates.js");if(!AFRAME.templates[t])throw new Error('Cannot find "'+this.data.name+'" template');this.options=this.getTemplateOptions(),this.aTemplate=AFRAME.templates[t];const s=document.importNode(this.aTemplate.template(this.options).content,!0);this.attachNodes(Array.from(s.children),"routeId"),this.load()}disconnectedCallback(){this.id===this.router.current&&this.detach()}detach(){Array.from(this.sceneEl.querySelectorAll("*[data-route-id="+this.id+"]")).forEach(s=>{this.sceneEl.removeChild(s)})}}customElements.define("a-route",d);
